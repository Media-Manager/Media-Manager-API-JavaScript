!function(){mediamanager="undefined"!=typeof mediamanager?mediamanager:{};var e={serialize:function(e){return Object.keys(e).reduce(function(t,i){var n=e[i],r=encodeURIComponent(i)+"="+encodeURIComponent(n);return t.push(r),t},[]).join("&")},templateReplace:function(e,t){return Object.keys(t).reduce(function(e,i){var n=t[i],r=RegExp("{\\s*"+i+"\\s*}","g");return e.replace(r,n)},e)},request:function(t,i,n){i=i||function(){},n=n||{},nanoajax.ajax({url:t+"?"+e.serialize(n),method:"GET"},function(e,t,n){var r=JSON.parse(t);return"undefined"!=typeof r.error?void console.error(r.error.message):void i(r,e,n)})},clone:function(e){var t=Object.getPrototypeOf(e),i=Object.create(t);return Object.keys(e).reduce(function(t,i){return t[i]=e[i],t},i)},extend:function(t,i){return Object.keys(i).reduce(function(e,t){return e[t]=i[t],e},e.clone(t))}},t={baseURL:"https://{shortname}.getmediamanager.com/api/v1/external",globalFilters:{},addFilter:function(i,n){var r=e.clone(this.globalFilters);r[i]=n;var o=e.clone(this),s=e.clone(t);return s.globalFilters=r,t.create(o,s)},create:function(e,t){var i=Object.create(t||this);return i=Object.keys(e).reduce(function(t,i){var n=e[i];return t[i]=n,t},i),Object.freeze(i)},client:function(e){return e&&(mediamanager.sn=e),mediamanager.sn},embed:function(e,t){return"undefined"!=typeof mediamanager.embed?"undefined"!=typeof e?(mediamanager.embed(t),void ping(e,mediamanager.id)):void console.error("No templateID passed"):void console.error("Missing Media Manager smart embed!")}},i=t.create({getMostViewedVideos:function(t,i,n){if("undefined"==typeof t)return void console.error("Missing templateID");var r=e.templateReplace(this.baseURL,{shortname:this.client()});n=e.extend(this.globalFilters,n),e.request(r+"/template/"+t+"/videos/mostviewed",i,n)},getLatestVideos:function(t,i,n){if("undefined"==typeof t)return void console.error("Missing templateID");var r=e.templateReplace(this.baseURL,{shortname:this.client()});n=e.extend(this.globalFilters,n),e.request(r+"/template/"+t+"/videos/latest",i,n)},getVideo:function(t,i,n,r){if("undefined"==typeof i)return void console.error("Missing templateID");if("undefined"==typeof t)return void console.error("Missing videoID");var o=e.templateReplace(this.baseURL,{shortname:this.client()});r=e.extend(this.globalFilters,r),e.request(o+"/template/"+i+"/video/"+t,n,r)},searchVideos:function(t,i,n,r){if("undefined"==typeof t)return void console.error("Missing templateID");var o=e.templateReplace(this.baseURL,{shortname:this.client()});r=e.extend(this.globalFilters,r),r=e.extend(r,{term:i}),e.request(o+"/template/"+t+"/video/search",n,r)},getVideos:function(t,i,n){if("undefined"==typeof t)return void console.error("Missing templateID");var r=e.templateReplace(this.baseURL,{shortname:this.client()});n=e.extend(this.globalFilters,n),e.request(r+"/template/"+t+"/videos",i,n)},getAudios:function(t,i,n){if("undefined"==typeof t)return void console.error("Missing templateID");var r=e.templateReplace(this.baseURL,{shortname:this.client()});n=e.extend(this.globalFilters,n),e.request(r+"/template/"+t+"/audios",i,n)},recommendVideo:function(t,i,n,r){if("undefined"==typeof t)return void console.error("Missing templateID");if("undefined"==typeof i)return void console.error("Missing videoid");var o=e.templateReplace(this.baseURL,{shortname:this.client()});r=e.extend(this.globalFilters,r),e.request(o+"/template/"+t+"/videos/recommend/"+i,n,r)}}),n=t.create({getVideos:function(t,i,n){if("undefined"==typeof i)return void console.error("Missing templateID");if("undefined"==typeof t)return void console.error("Missing playlistID");var r=e.templateReplace(this.baseURL,{shortname:this.client()}),o={templateID:i};e.request(r+"/playlist/"+t+"/videos",n,o)},getAudios:function(t,i,n){if("undefined"==typeof i)return void console.error("Missing templateID");if("undefined"==typeof t)return void console.error("Missing playlistID");var r=e.templateReplace(this.baseURL,{shortname:this.client()}),o={templateID:i};e.request(r+"/playlist/"+t+"/audios",n,o)},getAudio:function(t,i,n,r){if("undefined"==typeof i)return void console.error("Missing templateID");if("undefined"==typeof t)return void console.error("Missing playlistID");var o=e.templateReplace(this.baseURL,{shortname:this.client()}),s={templateID:i};e.request(o+"/playlist/"+t+"/audio/"+n,r,s)},getVideo:function(t,i,n,r){if("undefined"==typeof i)return void console.error("Missing templateID");if("undefined"==typeof t)return void console.error("Missing playlistID");var o=e.templateReplace(this.baseURL,{shortname:this.client()}),s={templateID:i};e.request(o+"/playlist/"+t+"/video/"+n,r,s)}});mediamanager.external=t.create({template:i,playlist:n,util:e})}();