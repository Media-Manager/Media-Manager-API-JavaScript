var mediamanager="undefined"!=typeof mediamanager?mediamanager:{};mediamanager.external=new function(){var e="https://{shortname}.getmediamanager.com/api/v1/external",i={};this.client=function(i){mediamanager.client(i),e=parseBaseURL()},this.addFilter=function(e,n){i[e]=n},this.embed=function(e,i){return"undefined"!=typeof mediamanager.embed?"undefined"!=typeof e?(mediamanager.embed(i),void ping(e,mediamanager.id)):void console.error("No templateID passed"):void console.error("Missing Media Manager smart embed!")},ping=function(e,i){var n=this.parseBaseURL().replace("/external","");request(n+"/ajax/embed/video/"+i,null,{external_template:e})},serialize=function(e){var i=[];for(var n in e)e.hasOwnProperty(n)&&i.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return i.join("&")},parseBaseURL=function(){return"undefined"!=typeof mediamanager.sn?e.replace("{shortname}",mediamanager.sn):void console.error("Missing client shortname")},request=function(e,n,t){n=n||function(){},t=$.extend(t||{},i),nanoajax.ajax({url:e+"?"+serialize(t),method:"GET"},function(e,i,t){var o=JSON.parse(i);return"undefined"!=typeof o.error?void console.error(o.error.message):void n(o,e,t)})},this.template=new function(){this.getMostViewedVideos=function(i,n){return"undefined"==typeof i?void console.error("Missing templateID"):void request(e+"/template/"+i+"/videos/mostviewed",n)},this.getLatestVideos=function(i,n){return"undefined"==typeof i?void console.error("Missing templateID"):void request(e+"/template/"+i+"/videos/latest",n)},this.getVideo=function(i,n,t){return"undefined"==typeof n?void console.error("Missing templateID"):"undefined"==typeof i?void console.error("Missing videoID"):void request(e+"/template/"+n+"/video/"+i,t)},this.searchVideos=function(i,n,t){return"undefined"==typeof i?void console.error("Missing templateID"):void request(e+"/template/"+i+"/video/search",t,{term:n})},this.getVideos=function(i,n){return"undefined"==typeof i?void console.error("Missing templateID"):void request(e+"/template/"+i+"/videos",n)},this.getAudios=function(i,n){return"undefined"==typeof i?void console.error("Missing templateID"):void request(e+"/template/"+i+"/audios",n)},this.recommendVideo=function(i,n,t){return"undefined"==typeof i?void console.error("Missing templateID"):"undefined"==typeof n?void console.error("Missing videoid"):void request(e+"/template/"+i+"/videos/recommend/"+n,t)}},this.playlist=new function(){this.getVideos=function(i,n,t){return"undefined"==typeof n?void console.error("Missing templateID"):"undefined"==typeof i?void console.error("Missing playlistID"):(mediamanager.external.addFilter("templateID",n),void request(e+"/playlist/"+i+"/videos",t))},this.getAudios=function(i,n,t){return"undefined"==typeof n?void console.error("Missing templateID"):"undefined"==typeof i?void console.error("Missing playlistID"):(mediamanager.external.addFilter("templateID",n),void request(e+"/playlist/"+i+"/audios",t))},this.getVideos=function(i,n,t){return"undefined"==typeof n?void console.error("Missing templateID"):"undefined"==typeof i?void console.error("Missing playlistID"):(mediamanager.external.addFilter("templateID",n),void request(e+"/playlist/"+i+"/videos",t))},this.getAudio=function(i,n,t,o){return"undefined"==typeof n?void console.error("Missing templateID"):"undefined"==typeof i?void console.error("Missing playlistID"):(mediamanager.external.addFilter("templateID",n),void request(e+"/playlist/"+i+"/audio/"+t,o))},this.getVideo=function(i,n,t,o){return"undefined"==typeof n?void console.error("Missing templateID"):"undefined"==typeof i?void console.error("Missing playlistID"):(mediamanager.external.addFilter("templateID",n),void request(e+"/playlist/"+i+"/video/"+t,o))}}};
